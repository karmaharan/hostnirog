<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Information Form</title>
    <link rel="icon" type="image/x-ico" href="static/favicon.ico">
    <link rel="shortcut icon" href="static/favicon.ico">
    <link rel="apple-touch-icon" href="static/apple-touch-icon">

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            grid-gap: 20px;
            padding: 20px;
            box-sizing: border-box;
            background-color: #f2f2f2;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        input[type="text"],
        input[type="number"],
        input[type="time"],
        select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button[type="submit"] {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        button[type="submit"]:hover {
            background-color: #45a049;
        }

        .meal-slot {
            display: flex;
            align-items: center;
        }

        .meal-slot input {
            margin-right: 10px;
        }

        .add-button {
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 0.5em 1em;
            font-size: 1em;
            border-radius: 5px;
        }
    </style>

    <script>
        function addMealSlot() {
            const container = document.getElementById('meal_slots_container');
            const newSlot = document.createElement('div');
            newSlot.className = 'meal-slot';
            newSlot.innerHTML = `
                <input type="text" name="meal_names" placeholder="Meal name">
                <input type="time" name="meal_times">
            `;
            container.appendChild(newSlot);
        }

        function updateHeightDisplay(heightInInches) {
            const feet = Math.floor(heightInInches / 12);
            const inches = heightInInches % 12;
            const heightDisplay = document.getElementById('height-display');
            heightDisplay.textContent = `${feet} feet ${inches} inches`;

            // Update hidden input fields
            document.getElementById('height_feet').value = feet;
            document.getElementById('height_inches').value = inches;
        }

        let currentStep = 0;
        let formGroups;
        let submitBtn;
        let nextBtn;

        document.addEventListener('DOMContentLoaded', () => {
            formGroups = document.querySelectorAll('.form-group');
            submitBtn = document.getElementById('submitBtn');
            nextBtn = document.getElementById('nextBtn');
            showStep(currentStep);
        });

        function showStep(step) {
            const startIndex = step * 3;
            const endIndex = Math.min(startIndex + 3, formGroups.length);
            formGroups.forEach((group, index) => {
                group.style.display = (index >= startIndex && index < endIndex) ? 'block' : 'none';
            });
        }

        function validateStep() {
            const startIndex = currentStep * 3;
            const endIndex = Math.min(startIndex + 3, formGroups.length);
            let isValid = true;
            for (let i = startIndex; i < endIndex; i++) {
                const fields = formGroups[i].querySelectorAll('input, select');
                fields.forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.style.border = '1px solid red';
                    } else {
                        field.style.border = '';
                    }
                });
            }
            return isValid;
        }

        function nextStep() {
            if (validateStep()) {
                if (currentStep < Math.ceil(formGroups.length / 3) - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
                if (currentStep === Math.ceil(formGroups.length / 3) - 1) {
                    nextBtn.style.display = 'none';
                    submitBtn.style.display = 'block';
                }
            }
        }

        function validateForm(event) {
            const formGroups = document.querySelectorAll('.form-group');
            let isValid = true;
            formGroups.forEach(group => {
                const fields = group.querySelectorAll('input, select');
                fields.forEach(field => {
                    if (!field.value.trim()) {
                        isValid = false;
                        field.style.border = '1px solid red';
                    }
                });
            });
            if (!isValid) {
                event.preventDefault();
            }
        }
    </script>
</head>
<body>
    <h1>Health Information Form</h1>
    <div class="container">
        <form method="POST" action="https://ai.techtantra.tech/" onsubmit="validateForm(event)">
            <div class="form-group">
                <label for="country">Country:</label>
                <input type="text" id="country" name="country" required>
            </div>

            <div class="form-group">
                <label for="region">Region:</label>
                <input type="text" id="region" name="region" required>
            </div>

            <div class="form-group">
                <label for="gender">Gender:</label>
                <select id="gender" name="gender" required>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="age">Age:</label>
                <input type="number" id="age" name="age" min="1" max="120" required>
            </div>

            <div class="form-group">
                <label for="sleep_time">Sleep Time:</label>
                <input type="time" id="sleep_time" name="sleep_time" value="21:00" required>
            </div>

            <div class="form-group">
                <label for="wake_time">Wake Time:</label>
                <input type="time" id="wake_time" name="wake_time" value="06:00" required>
            </div>

            <div class="form-group">
                <label for="weight">Weight (kg):</label>
                <input type="number" id="weight" name="weight" step="0.01" min="0.1" required>
            </div>

            <div class="form-group">
                <label for="height-slider">Height:</label>
                <input type="range" id="height-slider" name="height-slider" min="48" max="96" value="66" oninput="updateHeightDisplay(this.value)">
                <span id="height-display">5 feet 6 inches</span>
                <input type="hidden" id="height_feet" name="height_feet" value="5">
                <input type="hidden" id="height_inches" name="height_inches" value="6">
            </div>

            <div class="form-group">
                <label for="activity_level">Activity Level:</label>
                <select id="activity_level" name="activity_level" required>
                    <option value="sedentary">Sedentary (little or no exercise)</option>
                    <option value="light">Lightly active (light exercise/sports 1-3 days/week)</option>
                    <option value="moderate">Moderately active (moderate exercise/sports 3-5 days/week)</option>
                    <option value="very_active">Very active (hard exercise/sports 6-7 days a week)</option>
                    <option value="extra_active">Extra active (very hard exercise/sports & physical job or 2x training)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="goal">Goal:</label>
                <select id="goal" name="goal" required>
                    <option value="maintain">Maintain weight</option>
                    <option value="lose">Lose weight</option>
                    <option value="gain">Gain weight</option>
                </select>
            </div>

            <div class="form-group">
                <label for="dietary_preference">Dietary Preference:</label>
                <select id="dietary_preference" name="dietary_preference" required>
                    <option value="none">None</option>
                    <option value="vegetarian">Vegetarian</option>
                    <option value="vegan">Vegan</option>
                    <option value="keto">Keto</option>
                    <option value="paleo">Paleo</option>
                    <option value="low_carb">Low Carb</option>
                    <option value="mediterranean">Mediterranean</option>
                </select>
            </div>

            <div class="form-group">
                <label for="meals">Meals:</label>
                <div id="meal_slots_container">
                    <div class="meal-slot">
                        <input type="text" name="meal_names" placeholder="Meal name">
                        <input type="time" name="meal_times">
                    </div>
                </div>
                <button type="button" class="add-button" onclick="addMealSlot()">Add Meal Slot</button>
            </div>

            <button type="button" id="nextBtn" onclick="nextStep()">Next</button>
            <button type="submit" id="submitBtn" style="display:none">Submit</button>
        </form>
    </div>
</body>
</html>
